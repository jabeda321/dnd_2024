<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D 2024 Rules Glossary</title>
    <style>
        :root {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #555555;
            --text-tertiary: #888888;
            --border-color: #ddd;
            --accent-color: #8b5cf6;
            --accent-hover: #a78bfa;
            --code-bg: #e8e8e8;
            --link-color: #6366f1;
            --link-hover: #4f46e5;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1a1a1a;
                --bg-secondary: #2d2d2d;
                --text-primary: #e5e5e5;
                --text-secondary: #b0b0b0;
                --text-tertiary: #888888;
                --border-color: #444;
                --accent-color: #a78bfa;
                --accent-hover: #c4b5fd;
                --code-bg: #3a3a3a;
                --link-color: #818cf8;
                --link-hover: #a5b4fc;
            }
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        body {
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        h1 {
            margin: 0;
            font-size: 2em;
            color: var(--accent-color);
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            min-width: 200px;
            font-size: 0.95em;
        }

        .search-box::placeholder {
            color: var(--text-tertiary);
        }

        .theme-toggle {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .glossary {
            display: grid;
            gap: 20px;
        }

        .glossary-entry {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            transition: box-shadow 0.3s ease;
        }

        .glossary-entry:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
            .glossary-entry:hover {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            }
        }

        .entry-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background-color: var(--bg-primary);
            cursor: pointer;
            user-select: none;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .entry-header:hover {
            background-color: var(--code-bg);
        }

        .entry-title {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            margin: 0;
            font-size: 1.1em;
            color: var(--text-primary);
        }

        .entry-tag {
            display: inline-block;
            padding: 4px 10px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .toggle-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
            font-weight: bold;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .glossary-entry.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .entry-content {
            display: none;
            padding: 16px;
            color: var(--text-secondary);
        }

        .glossary-entry.expanded .entry-content {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .entry-content p {
            margin: 12px 0;
            line-height: 1.7;
        }

        .entry-content p:first-child {
            margin-top: 0;
        }

        .entry-content p:last-child {
            margin-bottom: 0;
        }

        .section-title {
            font-weight: 600;
            color: var(--text-primary);
            margin: 16px 0 8px 0;
            font-size: 0.95em;
        }

        .subsection {
            margin-left: 16px;
            margin-bottom: 12px;
            padding-left: 12px;
            border-left: 2px solid var(--accent-color);
        }

        .see-also {
            margin-top: 16px;
            padding: 12px;
            background-color: var(--bg-primary);
            border-left: 3px solid var(--link-color);
            border-radius: 4px;
            font-size: 0.95em;
        }

        .see-also-label {
            font-weight: 600;
            color: var(--link-color);
            margin-bottom: 6px;
        }

        .see-also-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 0.95em;
        }

        table th, table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        table th {
            background-color: var(--bg-primary);
            font-weight: 600;
            color: var(--text-primary);
        }

        table tr:hover {
            background-color: var(--bg-primary);
        }

        /* Cross-linking styles */
        .glossary-link {
            color: var(--link-color);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 1px dotted var(--link-color);
            transition: color 0.2s ease;
        }

        .glossary-link:hover {
            color: var(--link-hover);
            border-bottom-color: var(--link-hover);
        }

        /* Search highlighting */
        .highlight {
            background-color: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
        }

        @media (prefers-color-scheme: dark) {
            .highlight {
                background-color: #ffc107;
                color: #000;
            }
        }

        /* No results message */
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px 20px;
            color: var(--text-tertiary);
            font-size: 1.1em;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.5em;
            }

            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .controls {
                width: 100%;
                flex-direction: column;
            }

            .search-box {
                width: 100%;
                min-width: unset;
            }

            .theme-toggle {
                width: 100%;
            }

            .entry-title {
                flex-direction: column;
                align-items: flex-start;
            }

            body {
                padding: 15px;
            }
        }

        /* Print styles */
        @media print {
            .controls {
                display: none;
            }

            .glossary-entry {
                page-break-inside: avoid;
                border: 1px solid #ccc;
            }

            .entry-content {
                display: block !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öîÔ∏è D&D 2024 Rules Glossary</h1>
            <div class="controls">
                <input type="text" class="search-box" id="searchBox" placeholder="Search glossary...">
                <button class="theme-toggle" id="themeToggle">üåô Dark Mode</button>
            </div>
        </header>

        <div class="glossary" id="glossary"></div>
    </div>

    <script>
        // Glossary data - compact version for better performance
        const glossaryData = [
            {
                name: "Ability Check",
                tags: [],
                definition: "An ability check is a D20 Test that represents using one of the six abilities‚Äîor a specific skill associated with an ability‚Äîto overcome a challenge.",
                seeAlso: ["D20 Test", "Proficiency"]
            },
            {
                name: "Ability Score and Modifier",
                tags: [],
                definition: "A creature has six ability scores‚ÄîStrength, Dexterity, Constitution, Intelligence, Wisdom, and Charisma‚Äîeach of which has a corresponding modifier. Add the modifier when you make a D20 Test with the corresponding ability or when a rule asks you to do so.",
                seeAlso: ["The Six Abilities"]
            },
            {
                name: "Action",
                tags: ["Action"],
                definition: "On your turn, you can take one action. Choose which action to take from those below or from the special actions provided by your features.",
                details: "These actions are defined elsewhere in this glossary: Attack, Cast a Spell, Dash, Disengage, Dodge, Help, Hide, Influence, Interact with Object, Ready, Search, and Utilize.",
                seeAlso: ["Attack", "Bonus Action", "Reaction"]
            },
            {
                name: "Advantage",
                tags: [],
                definition: "If you have Advantage on a D20 Test, roll two d20s, and use the higher roll. A roll can't be affected by more than one Advantage, and Advantage and Disadvantage on the same roll cancel each other.",
                seeAlso: ["D20 Test", "Disadvantage"]
            },
            {
                name: "Adventure",
                tags: [],
                definition: "An adventure is a series of encounters. A story emerges through playing them.",
                seeAlso: ["Encounter"]
            },
            {
                name: "Alignment",
                tags: [],
                definition: "A creature's alignment broadly describes its ethical attitudes and ideals. Alignment is a combination of two factors: one identifies morality (good, evil, or neutral), and the other describes attitudes toward order (lawful, chaotic, or neutral). These factors allow for nine possible combinations, such as Lawful Good and Neutral Evil.",
                seeAlso: ["Creating a Character"]
            },
            {
                name: "Ally",
                tags: [],
                definition: "A creature is your ally if it is a member of your adventuring party, your friend, on your side in combat, or a creature that the rules or the DM designates as your ally."
            },
            {
                name: "Area of Effect",
                tags: [],
                definition: "The descriptions of many spells and other features specify that they have an area of effect, which typically has one of six shapes: Cone, Cube, Cylinder, Emanation, Line, and Sphere.",
                details: "An area of effect has a point of origin, a location from which the effect's energy erupts. If all straight lines from the point of origin to a location in the area are blocked by an obstruction providing Total Cover, that location isn't included.",
                seeAlso: ["Cone", "Cube", "Cylinder", "Emanation", "Line", "Sphere", "Cover"]
            },
            {
                name: "Armor Class",
                tags: [],
                definition: "An Armor Class (AC) is the target number for an attack roll. AC represents how difficult it is to hit a target.",
                details: "Your base AC calculation is 10 plus your Dexterity modifier. If a rule gives you another base AC calculation, you choose which calculation to use; you can't use more than one.",
                seeAlso: ["Attack Roll", "Armor Training"]
            },
            {
                name: "Armor Training",
                tags: [],
                definition: "Armor training allows you to use armor of a certain category without drawbacks. If you wear Light, Medium, or Heavy armor and lack training with it, you have Disadvantage on any D20 Test involving Strength or Dexterity, and you can't cast spells.",
                seeAlso: ["Disadvantage"]
            },
            {
                name: "Attack",
                tags: ["Action"],
                definition: "When you take the Attack action, you can make one attack roll with a weapon or an Unarmed Strike.",
                details: "You can equip or unequip one weapon as part of this action before or after the attack. If you have a feature like Extra Attack that gives you more than one attack as part of the Attack action, you can move between those attacks.",
                seeAlso: ["Attack Roll", "Unarmed Strike", "Extra Attack"]
            },
            {
                name: "Attack Roll",
                tags: [],
                definition: "An attack roll is a D20 Test that represents making an attack with a weapon, an Unarmed Strike, or a spell.",
                seeAlso: ["D20 Test", "Attack", "Critical Hit"]
            },
            {
                name: "Attitude",
                tags: [],
                definition: "A monster has a starting attitude toward a player character: Friendly, Hostile, or Indifferent.",
                seeAlso: ["Friendly", "Hostile", "Indifferent", "Influence"]
            },
            {
                name: "Attunement",
                tags: [],
                definition: "Some magic items require a creature to form a bond‚Äîcalled Attunement‚Äîwith them before the creature can use an item's magical properties. A creature can have Attunement with no more than three magic items at a time.",
                seeAlso: ["Magic Items"]
            },
            {
                name: "Blinded",
                tags: ["Condition"],
                definition: "While you have the Blinded condition, you experience the following effects:",
                details: "‚Ä¢ Can't see and automatically fail any ability check requiring sight\n‚Ä¢ Attack rolls against you have Advantage, and your attack rolls have Disadvantage",
                seeAlso: ["Condition", "Advantage", "Disadvantage"]
            },
            {
                name: "Blindsight",
                tags: [],
                definition: "If you have Blindsight, you can see within a specific range without relying on physical sight. Within that range, you can see anything that isn't behind Total Cover even if you have the Blinded condition or are in Darkness.",
                seeAlso: ["Blinded", "Total Cover", "Darkness"]
            },
            {
                name: "Bloodied",
                tags: [],
                definition: "A creature is Bloodied while it has half its Hit Points or fewer remaining.",
                seeAlso: ["Hit Points"]
            },
            {
                name: "Bonus Action",
                tags: [],
                definition: "A Bonus Action is a special action that you can take on the same turn that you take an action. You can't take more than one Bonus Action on a turn, and you have a Bonus Action to take only if a rule explicitly says so.",
                seeAlso: ["Action", "Reaction"]
            },
            {
                name: "Breaking Objects",
                tags: [],
                definition: "Objects can be harmed by attacks and by some spells. If an object is exceedingly fragile, the DM may allow a creature to break it automatically with the Attack or Utilize action.",
                details: "Objects have Immunity to Poison and Psychic damage. The DM might decide that some damage types are more or less effective against an object.",
                seeAlso: ["Attack", "Utilize"]
            },
            {
                name: "Bright Light",
                tags: [],
                definition: "Bright Light is normal illumination.",
                seeAlso: ["Dim Light", "Darkness"]
            },
            {
                name: "Burning",
                tags: ["Hazard"],
                definition: "A burning creature or object takes 1d4 Fire damage at the start of each of its turns. As an action, you can extinguish fire on yourself by giving yourself the Prone condition and rolling on the ground.",
                seeAlso: ["Fire Damage", "Prone"]
            },
            {
                name: "Cantrip",
                tags: [],
                definition: "A cantrip is a level 0 spell, which is cast without a spell slot.",
                seeAlso: ["Spells"]
            },
            {
                name: "Challenge Rating",
                tags: [],
                definition: "Challenge Rating (CR) summarizes the threat a monster poses to a group of four player characters. Compare a monster's CR to the characters' level.",
                details: "If the CR is higher, the monster is likely dangerous. If the CR is lower, the monster likely poses little threat. Circumstances and the number of players can significantly alter how threatening a monster is.",
                seeAlso: ["Stat Block"]
            },
            {
                name: "Charmed",
                tags: ["Condition"],
                definition: "While you have the Charmed condition, you experience the following effects:",
                details: "‚Ä¢ Can't attack the charmer or target them with damaging abilities\n‚Ä¢ The charmer has Advantage on ability checks to interact with you socially",
                seeAlso: ["Condition", "Advantage"]
            },
            {
                name: "Climbing",
                tags: [],
                definition: "While you're climbing, each foot of movement costs 1 extra foot (2 extra feet in Difficult Terrain). You ignore this cost if you have a Climb Speed.",
                details: "At the DM's option, climbing a slippery surface might require a successful DC 15 Strength (Athletics) check.",
                seeAlso: ["Climb Speed", "Difficult Terrain"]
            },
            {
                name: "Climb Speed",
                tags: [],
                definition: "A Climb Speed can be used in place of Speed to traverse a vertical surface without expending the extra movement normally associated with climbing.",
                seeAlso: ["Climbing", "Speed"]
            },
            {
                name: "Concentration",
                tags: ["Concentration"],
                definition: "Some spells and other effects require Concentration to remain active. If the effect's creator loses Concentration, the effect ends.",
                details: "Concentration breaks if: (1) you cast another spell requiring Concentration, (2) you take damage (must succeed on Constitution save, DC 10 or half damage, max 30), or (3) you become Incapacitated or die.",
                seeAlso: ["Spell", "Incapacitated"]
            },
            {
                name: "Condition",
                tags: [],
                definition: "A condition is a temporary game state. The definition of a condition says how it affects its recipient, and various rules define how to end a condition.",
                details: "A condition doesn't stack with itself; a recipient either has a condition or doesn't. The Exhaustion condition is an exception to that rule.",
                seeAlso: ["Blinded", "Charmed", "Exhaustion", "Frightened", "Grappled", "Incapacitated", "Invisible", "Paralyzed", "Petrified", "Poisoned", "Prone", "Restrained", "Unconscious"]
            },
            {
                name: "Cone",
                tags: ["Area of Effect"],
                definition: "A Cone is an area of effect that extends in straight lines from a point of origin in a direction its creator chooses. A Cone's width at any point equals that point's distance from the origin.",
                details: "Example: A 15-foot Cone is 15 feet wide at a point 15 feet from origin. The point of origin isn't included unless the creator decides otherwise.",
                seeAlso: ["Area of Effect"]
            },
            {
                name: "Cover",
                tags: [],
                definition: "Cover provides a degree of protection to a target behind it. There are three degrees of cover:",
                details: "‚Ä¢ Half Cover: +2 bonus to AC and Dexterity saving throws\n‚Ä¢ Three-Quarters Cover: +5 bonus to AC and Dexterity saving throws\n‚Ä¢ Total Cover: Can't be targeted directly",
                seeAlso: ["Armor Class"]
            },
            {
                name: "Critical Hit",
                tags: [],
                definition: "If you roll a 20 on the d20 for an attack roll, you score a Critical Hit, and the attack hits regardless of any modifiers or the target's AC.",
                details: "A Critical Hit lets you roll extra dice for the attack's damage. Roll all of the attack's damage dice twice and add them together, then add relevant modifiers.",
                seeAlso: ["Attack Roll"]
            },
            {
                name: "D20 Test",
                tags: [],
                definition: "D20 Tests encompass the three main d20 rolls of the game: ability checks, attack rolls, and saving throws. If something affects D20 Tests, it affects all three.",
                seeAlso: ["Ability Check", "Attack Roll"]
            },
            {
                name: "Damage",
                tags: [],
                definition: "Damage represents harm that causes a creature or an object to lose Hit Points.",
                seeAlso: ["Damage Roll", "Hit Points"]
            },
            {
                name: "Damage Roll",
                tags: [],
                definition: "A damage roll is a die roll, adjusted by any applicable modifiers, that deals damage to a target.",
                seeAlso: ["Damage"]
            },
            {
                name: "Damage Threshold",
                tags: [],
                definition: "A creature or an object with a damage threshold has Immunity to all damage unless it takes an amount of damage from a single attack or effect equal to or greater than its threshold.",
                details: "Example: If an object has a damage threshold of 10, it takes no damage from 9 damage but takes all 11 damage.",
                seeAlso: ["Immunity"]
            },
            {
                name: "Darkness",
                tags: [],
                definition: "An area of Darkness is Heavily Obscured.",
                seeAlso: ["Heavily Obscured", "Dim Light"]
            },
            {
                name: "Darkvision",
                tags: [],
                definition: "If you have Darkvision, you can see in Dim Light within a specified range as if it were Bright Light and in Darkness within that range as if it were Dim Light.",
                details: "You discern colors in Darkness only as shades of gray.",
                seeAlso: ["Dim Light", "Bright Light", "Darkness"]
            },
            {
                name: "Dash",
                tags: ["Action"],
                definition: "When you take the Dash action, you gain extra movement for the current turn equal to your Speed. If your Speed is 30 feet, you can move up to 60 feet if you Dash.",
                seeAlso: ["Action", "Speed"]
            },
            {
                name: "Dead",
                tags: [],
                definition: "A dead creature has no Hit Points and can't regain them unless revived by magic such as Raise Dead or Revivify.",
                details: "When revived, the creature returns with any conditions, magical contagions, or curses affecting it if their durations are still ongoing. Exhaustion is reduced by 1 level.",
                seeAlso: ["Hit Points"]
            },
            {
                name: "Deafened",
                tags: ["Condition"],
                definition: "While you have the Deafened condition, you can't hear and automatically fail any ability check requiring hearing.",
                seeAlso: ["Condition"]
            },
            {
                name: "Death Saving Throw",
                tags: [],
                definition: "A player character must make a Death Saving Throw if they start their turn with 0 Hit Points.",
                seeAlso: ["Hit Points", "Unconscious"]
            },
            {
                name: "Difficult Terrain",
                tags: [],
                definition: "If a space is Difficult Terrain, every foot of movement in that space costs 1 extra foot. Moving 5 feet through Difficult Terrain costs 10 feet of movement.",
                details: "Difficult Terrain includes: creatures (non-Tiny/non-ally), furniture, heavy snow/ice/rubble, liquid, narrow openings, slopes ‚â•20¬∞.",
                seeAlso: ["Speed"]
            },
            {
                name: "Difficulty Class",
                tags: [],
                definition: "A Difficulty Class (DC) is the target number for an ability check or a saving throw.",
                seeAlso: ["D20 Test"]
            },
            {
                name: "Dim Light",
                tags: [],
                definition: "An area with Dim Light is Lightly Obscured.",
                seeAlso: ["Lightly Obscured", "Bright Light", "Darkness"]
            },
            {
                name: "Disadvantage",
                tags: [],
                definition: "If you have Disadvantage on a D20 Test, roll two d20s and use the lower roll. Advantage and Disadvantage on the same roll cancel each other.",
                seeAlso: ["D20 Test", "Advantage"]
            },
            {
                name: "Disengage",
                tags: ["Action"],
                definition: "If you take the Disengage action, your movement doesn't provoke Opportunity Attacks for the rest of the current turn.",
                seeAlso: ["Action", "Opportunity Attack"]
            },
            {
                name: "Dodge",
                tags: ["Action"],
                definition: "If you take the Dodge action, until the start of your next turn, attack rolls against you have Disadvantage if you can see the attacker, and you make Dexterity saving throws with Advantage.",
                seeAlso: ["Action", "Advantage", "Disadvantage"]
            },
            {
                name: "Encounter",
                tags: [],
                definition: "An encounter is a scene in an adventure that is part of the game's three pillars: social interaction, exploration, or combat.",
                seeAlso: ["Adventure"]
            },
            {
                name: "Enemy",
                tags: [],
                definition: "A creature is your enemy if it fights against you in combat, actively works to harm you, or is designated as an enemy by rules or your DM.",
                seeAlso: ["Ally"]
            },
            {
                name: "Exhaustion",
                tags: ["Condition"],
                definition: "While you have the Exhaustion condition, you experience effects that increase with Exhaustion levels (cumulative).",
                details: "‚Ä¢ D20 Test rolls reduced by 2 per Exhaustion level\n‚Ä¢ Speed reduced by 5 feet per level\n‚Ä¢ You die if Exhaustion level reaches 6\n‚Ä¢ Long Rest removes 1 level",
                seeAlso: ["Condition", "D20 Test", "Long Rest"]
            },
            {
                name: "Experience Points",
                tags: [],
                definition: "As they overcome challenges and complete adventures, characters earn Experience Points (XP), awarded by the Dungeon Master. When a character's XP total crosses thresholds, their level increases.",
                seeAlso: ["Level Advancement"]
            },
            {
                name: "Frightened",
                tags: ["Condition"],
                definition: "While you have the Frightened condition, you experience the following effects:",
                details: "‚Ä¢ Disadvantage on ability checks and attack rolls while the source of fear is within line of sight\n‚Ä¢ Can't willingly move closer to the source of fear",
                seeAlso: ["Condition", "Disadvantage"]
            },
            {
                name: "Grappled",
                tags: ["Condition"],
                definition: "While you have the Grappled condition, you experience the following effects:",
                details: "‚Ä¢ Speed is 0 and can't increase\n‚Ä¢ Disadvantage on attack rolls against any target except the grappler\n‚Ä¢ Grappler can drag or carry you when it moves",
                seeAlso: ["Condition", "Grappling"]
            },
            {
                name: "Grappling",
                tags: [],
                definition: "A creature can grapple another creature by using an Unarmed Strike or via special attacks. Successfully grappling gives the target the Grappled condition.",
                details: "‚Ä¢ A creature must have a free hand to grapple (some allow tentacles/maw)\n‚Ä¢ Grappled creature can escape with Strength (Athletics) or Dexterity (Acrobatics) check\n‚Ä¢ One grapple per limb; can't use that part for other targets unless grapple ends",
                seeAlso: ["Unarmed Strike", "Grappled"]
            },
            {
                name: "Heavily Obscured",
                tags: [],
                definition: "You have the Blinded condition while trying to see something in a Heavily Obscured space.",
                seeAlso: ["Blinded", "Darkness"]
            },
            {
                name: "Help",
                tags: ["Action"],
                definition: "When you take the Help action, you do one of the following:",
                details: "1. Assist Ability Check: Choose a skill/tool proficiency and an ally. That ally has Advantage on their next ability check with that skill/tool (expires at start of your next turn).\n2. Assist Attack: Momentarily distract an enemy within 5 feet, giving Advantage to an ally's next attack roll (expires at start of your next turn).",
                seeAlso: ["Action", "Advantage"]
            },
            {
                name: "Heroic Inspiration",
                tags: [],
                definition: "If you (a player character) have Heroic Inspiration, you can expend it to reroll any die immediately after rolling it, and you must use the new roll.",
                seeAlso: []
            },
            {
                name: "Hide",
                tags: ["Action"],
                definition: "With the Hide action, you try to conceal yourself. To succeed, make a DC 15 Dexterity (Stealth) check while Heavily Obscured or behind Three-Quarters/Total Cover, and be out of any enemy's line of sight.",
                details: "On success, you have the Invisible condition while hidden. You stop being hidden if you make sound, are found, make an attack, or cast a spell with Verbal component.",
                seeAlso: ["Action", "Invisible", "Cover", "Heavily Obscured"]
            },
            {
                name: "Hit Points",
                tags: [],
                definition: "Hit Points (HP) are a measure of how difficult it is to kill or destroy a creature or an object. Damage reduces Hit Points, and healing restores them.",
                details: "You can't have more Hit Points than your maximum, and can't have less than 0.",
                seeAlso: ["Damage", "Healing"]
            },
            {
                name: "Hostile",
                tags: ["Attitude"],
                definition: "A Hostile creature views you unfavorably. You have Disadvantage on ability checks to influence a Hostile creature.",
                seeAlso: ["Attitude", "Influence", "Disadvantage"]
            },
            {
                name: "Immunity",
                tags: [],
                definition: "If you have Immunity to a damage type or a condition, it doesn't affect you in any way.",
                seeAlso: ["Damage", "Condition"]
            },
            {
                name: "Incapacitated",
                tags: ["Condition"],
                definition: "While you have the Incapacitated condition, you experience the following effects:",
                details: "‚Ä¢ Can't take any action, Bonus Action, or Reaction\n‚Ä¢ Concentration is broken\n‚Ä¢ Can't speak\n‚Ä¢ Disadvantage on Initiative if Incapacitated when rolling",
                seeAlso: ["Condition", "Action", "Bonus Action", "Concentration"]
            },
            {
                name: "Indifferent",
                tags: ["Attitude"],
                definition: "An Indifferent creature has no desire to help or hinder you. Indifferent is the default attitude of a monster.",
                seeAlso: ["Attitude", "Influence"]
            },
            {
                name: "Influence",
                tags: ["Action"],
                definition: "With the Influence action, you urge a monster to do something by describing how you're communicating. The DM determines if the monster feels willing, unwilling, or hesitant.",
                details: "Willing: No check needed if aligned with desires. Unwilling: No check if repugnant/against alignment. Hesitant: Make ability check (Deception, Intimidation, Performance, Persuasion, or Animal Handling) with DC 15 or creature's Intelligence, whichever is higher.",
                seeAlso: ["Action", "Charisma"]
            },
            {
                name: "Initiative",
                tags: [],
                definition: "Initiative determines the order of turns during combat. Your Initiative score equals 10 plus your Dexterity modifier.",
                details: "If you have Advantage on Initiative rolls, increase score by 5. If Disadvantage, decrease by 5.",
                seeAlso: ["Combat", "Dexterity"]
            },
            {
                name: "Invisible",
                tags: ["Condition"],
                definition: "While you have the Invisible condition, you experience the following effects:",
                details: "‚Ä¢ Advantage on Initiative rolls\n‚Ä¢ Not affected by effects requiring sight unless creator can somehow see you\n‚Ä¢ Attack rolls against you have Disadvantage, your attacks have Advantage\n‚Ä¢ No advantage against creatures that can somehow see you",
                seeAlso: ["Condition", "Advantage", "Disadvantage"]
            },
            {
                name: "Knocking Out a Creature",
                tags: [],
                definition: "When you would reduce a creature to 0 Hit Points with a melee attack, you can instead reduce it to 1 Hit Point. The creature then has the Unconscious condition and starts a Short Rest.",
                details: "The creature remains Unconscious until it regains any Hit Points or until someone uses an action to administer first aid (DC 10 Wisdom Medicine check).",
                seeAlso: ["Unconscious", "Hit Points", "Short Rest"]
            },
            {
                name: "Lightly Obscured",
                tags: [],
                definition: "You have Disadvantage on Wisdom (Perception) checks to see something in a Lightly Obscured space.",
                seeAlso: ["Disadvantage", "Dim Light"]
            },
            {
                name: "Long Jump",
                tags: [],
                definition: "When you make a Long Jump horizontally, you leap a number of feet up to your Strength score if you move ‚â•10 feet before the jump. Standing Long Jump allows half that distance.",
                details: "Each foot jumped costs a foot of movement. Difficult Terrain landing requires DC 10 Acrobatics check or you get Prone condition.",
                seeAlso: ["Strength", "Jumping", "Difficult Terrain"]
            },
            {
                name: "Long Rest",
                tags: [],
                definition: "A Long Rest is ‚â•8 hours of extended downtime. You sleep ‚â•6 hours and perform ‚â§2 hours of light activity.",
                details: "Benefits: Regain all HP and spent Hit Dice, restore ability scores, reduce Exhaustion by 1, recharge special features.\nInterrupted by: Initiative, non-cantrip spells, damage, 1+ hour walking. Resume within 1 hour for each interruption, requiring +1 hour per interruption to finish.",
                seeAlso: ["Short Rest", "Hit Points", "Exhaustion"]
            },
            {
                name: "Paralyzed",
                tags: ["Condition"],
                definition: "While you have the Paralyzed condition, you experience the following effects:",
                details: "‚Ä¢ Have the Incapacitated condition\n‚Ä¢ Speed is 0 and can't increase\n‚Ä¢ Automatically fail Strength and Dexterity saving throws\n‚Ä¢ Attack rolls against you have Advantage\n‚Ä¢ Any attack hitting you is a Critical Hit if attacker within 5 feet",
                seeAlso: ["Condition", "Incapacitated", "Critical Hit"]
            },
            {
                name: "Petrified",
                tags: ["Condition"],
                definition: "While you have the Petrified condition, you experience the following effects:",
                details: "‚Ä¢ Transformed into solid inanimate substance (usually stone) along with nonmagical items worn/carried\n‚Ä¢ Weight increases by 10x, cease aging\n‚Ä¢ Have Incapacitated condition\n‚Ä¢ Speed is 0\n‚Ä¢ Attack rolls against you have Advantage\n‚Ä¢ Automatically fail Strength/Dexterity saves\n‚Ä¢ Resistance to all damage\n‚Ä¢ Immunity to Poisoned condition",
                seeAlso: ["Condition", "Incapacitated", "Resistance", "Immunity"]
            },
            {
                name: "Poisoned",
                tags: ["Condition"],
                definition: "While you have the Poisoned condition, you have Disadvantage on attack rolls and ability checks.",
                seeAlso: ["Condition", "Disadvantage"]
            },
            {
                name: "Prone",
                tags: ["Condition"],
                definition: "While you have the Prone condition, you experience the following effects:",
                details: "‚Ä¢ Only movement options are to crawl or spend half your Speed to right yourself\n‚Ä¢ Disadvantage on attack rolls\n‚Ä¢ Attack rolls against you have Advantage if attacker within 5 feet, Disadvantage otherwise",
                seeAlso: ["Condition", "Disadvantage", "Advantage"]
            },
            {
                name: "Reaction",
                tags: [],
                definition: "A Reaction is a special action taken in response to a defined trigger. You can take a Reaction on another creature's turn, and if on your turn, you can do so even with an action or Bonus Action.",
                details: "Once you take a Reaction, you can't take another until the start of your next turn. Opportunity Attack is a Reaction available to all creatures.",
                seeAlso: ["Action", "Bonus Action", "Opportunity Attack"]
            },
            {
                name: "Ready",
                tags: ["Action"],
                definition: "You take the Ready action to wait for a circumstance before you act. Decide what perceivable circumstance triggers your Reaction, then choose the action you'll take.",
                details: "When the trigger occurs, take your Reaction or ignore it. If readying a spell with action casting time, cast normally (expending resources), then release with Reaction at trigger. Readied spells require Concentration up to start of next turn.",
                seeAlso: ["Action", "Reaction", "Concentration"]
            },
            {
                name: "Restrained",
                tags: ["Condition"],
                definition: "While you have the Restrained condition, you experience the following effects:",
                details: "‚Ä¢ Speed is 0 and can't increase\n‚Ä¢ Attack rolls against you have Advantage, your attack rolls have Disadvantage\n‚Ä¢ Disadvantage on Dexterity saving throws",
                seeAlso: ["Condition", "Advantage", "Disadvantage"]
            },
            {
                name: "Short Rest",
                tags: [],
                definition: "A Short Rest is a period of downtime (minimum 1 hour) where you perform no strenuous activity.",
                details: "During a Short Rest, you can spend Hit Dice to regain Hit Points. Some features recharge after a Short Rest.",
                seeAlso: ["Long Rest", "Hit Dice"]
            },
            {
                name: "Speed",
                tags: [],
                definition: "Speed determines how far a creature can move when taking the Dash action or during its turn in combat.",
                details: "Most creatures have a Walking Speed of 30 feet. Special speeds include: Burrow Speed, Climb Speed, Fly Speed, Swim Speed, and Hover.",
                seeAlso: ["Dash", "Burrow Speed", "Climb Speed", "Fly Speed", "Swim Speed"]
            },
            {
                name: "Surprise",
                tags: [],
                definition: "The DM determines whether an encounter starts with surprise, which happens when combatants are unaware of hostile intent or each other.",
                details: "If surprised, you can't move or take actions on your first turn of combat, and you can't take Reactions until that turn ends.",
                seeAlso: ["Initiative", "Action", "Reaction"]
            },
            {
                name: "Swim Speed",
                tags: [],
                definition: "A Swim Speed can be used in place of Speed to move through water.",
                seeAlso: ["Speed"]
            },
            {
                name: "Unarmed Strike",
                tags: [],
                definition: "An Unarmed Strike is a melee attack with your body‚Äîtypically a punch, kick, headbutt, or bite.",
                details: "On a hit, you roll 1d4 damage (bludgeoning, piercing, or slashing‚Äîyour choice). You add your Strength or Dexterity modifier and Proficiency Bonus.",
                seeAlso: ["Attack Roll", "Melee Attack", "Damage"]
            },
            {
                name: "Unconscious",
                tags: ["Condition"],
                definition: "While you have the Unconscious condition, you experience the following effects:",
                details: "‚Ä¢ Incapacitated\n‚Ä¢ Can't move or speak\n‚Ä¢ Unaware of surroundings\n‚Ä¢ Drop anything you're holding\n‚Ä¢ Prone\n‚Ä¢ Attack rolls against you have Advantage\n‚Ä¢ Any attack hitting you within 5 feet is a Critical Hit",
                seeAlso: ["Condition", "Incapacitated", "Prone", "Critical Hit"]
            }
        ];

        // Dark Mode Toggle
        const themeToggle = document.getElementById('themeToggle');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

        function updateTheme() {
            const isDark = localStorage.getItem('darkMode') === 'true' || 
                          (localStorage.getItem('darkMode') === null && prefersDark.matches);
            document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';
            themeToggle.textContent = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        }

        themeToggle.addEventListener('click', () => {
            const isDark = localStorage.getItem('darkMode') === 'true';
            localStorage.setItem('darkMode', !isDark);
            updateTheme();
        });

        prefersDark.addEventListener('change', updateTheme);
        updateTheme();

        // Create glossary
        function renderGlossary(data = glossaryData) {
            const glossary = document.getElementById('glossary');
            glossary.innerHTML = '';

            if (data.length === 0) {
                glossary.innerHTML = '<div class="no-results">No entries found. Try a different search.</div>';
                return;
            }

            data.forEach(entry => {
                const div = document.createElement('div');
                div.className = 'glossary-entry';
                div.innerHTML = `
                    <div class="entry-header">
                        <h2 class="entry-title">
                            ${entry.name}
                            ${entry.tags.map(tag => `<span class="entry-tag">${tag}</span>`).join('')}
                        </h2>
                        <div class="toggle-icon">‚ñº</div>
                    </div>
                    <div class="entry-content">
                        <p>${autoLink(entry.definition)}</p>
                        ${entry.details ? `<div class="section-title">Details</div><p>${autoLink(entry.details)}</p>` : ''}
                        ${entry.seeAlso && entry.seeAlso.length > 0 ? `
                            <div class="see-also">
                                <div class="see-also-label">See Also</div>
                                <div class="see-also-links">
                                    ${entry.seeAlso.map(link => `<span class="glossary-link" onclick="jumpToEntry('${link}')">${link}</span>`).join(', ')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;

                div.querySelector('.entry-header').addEventListener('click', () => {
                    div.classList.toggle('expanded');
                });

                glossary.appendChild(div);
            });
        }

        // Auto-linking function
        function autoLink(text) {
            let result = text;
            glossaryData.forEach(entry => {
                const regex = new RegExp(`\\b(${entry.name})\\b(?!.*?<\\/a>)`, 'g');
                result = result.replace(regex, `<span class="glossary-link" onclick="jumpToEntry('${entry.name}')" style="cursor: pointer;">${entry.name}</span>`);
            });
            return result;
        }

        // Jump to entry
        window.jumpToEntry = function(entryName) {
            const entries = document.querySelectorAll('.glossary-entry');
            entries.forEach(entry => {
                const title = entry.querySelector('.entry-title');
                if (title && title.textContent.trim().startsWith(entryName)) {
                    entry.classList.add('expanded');
                    entry.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        };

        // Search functionality
        const searchBox = document.getElementById('searchBox');
        searchBox.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filtered = glossaryData.filter(entry => 
                entry.name.toLowerCase().includes(query) ||
                entry.definition.toLowerCase().includes(query) ||
                (entry.details && entry.details.toLowerCase().includes(query))
            );
            renderGlossary(filtered);
        });

        // Initial render
        renderGlossary();
    </script>
</body>
</html>
